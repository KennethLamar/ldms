.\" Manpage for Plugin_procnetdev
.\" Contact ovis-help@ca.sandia.gov to correct errors or typos.
.TH man 7 "27 Nov 2018" "v4" "LDMS Plugin procnetdev man page"

.SH NAME
Plugin_procnetdev - man page for the LDMS procnetdev plugin

.SH SYNOPSIS
.nh
.ad l
.HP
load name=\fIINST_NAME\fR plugin=\fBprocnetdev\fR
.HP
config name=\fIINST_NAME\fR [ifs=\fIINTERFACES\fR] [instance=\fIPREFIX\fR]
[\fICOMMON_SAMPLER_OPTIONS\fR]
.TP
start name=\fIINST_NAME\fR
.hy
.ad

.SH DESCRIPTION
With LDMS (Lightweight Distributed Metric Service), plugins for the ldmsd (ldms
daemon) are configured via ldmsd_controller or a configuration file. The
procnetdev plugin provides network info from /proc/net/dev. This sampler plugin
generates multiple sets -- one set per network device. If the \fBifs\fR list is
not specified, all availble devices will be included. If a new interface appears
after the sampler instance has started, it will also be included if the device
is listed in \fBifs\fR list or if the \fBifs\fR is empty.

Since procnetdev generates multiple sets, it uses \fBinstance\fR config
attribute as a prefix to the sets it generates
(\%\fIinstance\fR / \fIDEV_NAME\fR).  For example, "instance=x/y" will generate
sets \%"x/y/lo", \%"x/y/eth0", etc.

.SH LOADING PLUGIN INSTANCE
\fBprocnetdev\fR plugin instance can be loaded with the following syntax:

\fBload\fR name=\fIINST_NAME\fR plugin=\fBprocnetdev\fR

For example, "load name=mynetdev plugin=procnetdev" command will load procnetdev
sampler plugin instance, and assign "mynetdev" instance name to it. The plugin
instance name must be unique among all loaded plugin instances (not just
samplers) within \fBldmsd\fR. procnetdev plugin can can have multiple instances
loaded.

.SH PLUGIN INSTANCE CONFIGURATION
The procnetdev plugin uses the sampler_base base class. This man page covers
only the configuration attributes, or those with default values, specific to the
this plugin; see \fBldms_sampler_base\fR(7) for the common sampler plugin
options.

.HP
.nh
.ad l
\fBconfig\fR name=\fIINST_NAME\fR [ifs=\fIINTERFACES\fR] [instance=\fIPREFIX\fR]
[\fICOMMON_SAMPLER_OPTIONS\fR]
.hy
.ad

.SS Options
.HP
name=\fIINST_NAME\fR
.br
The name of the instance.
.HP
[ifs=\fIINTERFACES\fR]
.br
Comma-separated list of network interfaces to monitor. Non-existent interfaces
in the list will be ignored, until they later appear. The default value is an
empty string, which means include all interfaces. The new interfaces appearing
in the future will be included if they are included in the ifs list, or if the
ifs list is empty.
.RE
.HP
[instance=\fIPREFIX\fR]
.br
Since procnetdev is a multi-set sampler, the \fBinstance\fR attribute is used as
a prefix to the sets it generates. The default value of the prefix is
\%"\fIPRODUCER_NAME\fR/\fIINST_NAME\fR" (from producer and name common
attributes respectively). The sets generated by procnetdev will be named as
\%"\fIPREFIX\fR/\fIDEV_NAME\fR". Please note that the \fIPREFIX\fR value does
not have a trailing "/".
.HP
[\fICOMMON_SAMPLER_OPTIONS\fR]
.br
Please see \fBldms_sampler_base\fR(7) for the common sampler options.

.SH EXAMPLES
.PP
Within ldmsd_controller or a configuration file:
.nf
load name=netdev plugin=procnetdev
config name=netdev producer=vm1_1 instance=vm1_1/procnetdev ifs=eth0,eth1
start name=netdev interval=1000000
.fi

.SH SEE ALSO
.nh
.ad l
.BR ldmsd (8),
.BR ldms_quickstart (7),
.BR ldmsd_controller (8),
.BR ldms_sampler_base (7)
